<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bbs.mapper.UserMapper">

	<resultMap id="getUserResult" type="bbs.entity.UserEntity">
		<result column="login_id" property="loginId" />
		<result column="name" property="name" />
	</resultMap>


	<select id="getUser" resultMap="getUserResult">
		select login_id, name from users
		where login_id = #{loginId}
	</select>

	<select id="getBranches" resultType="String">
		select name
		from branches;
	</select>

	<select id="getBranchId" resultType="int">
		select id
		from branches
		where
		name = #{branchName};

	</select>

	<select id="getDepartments" resultType="String">
		select name
		from
		departments;
	</select>

	<select id="getDepartmentId" resultType="int">
		select id
		from
		departments
		where name = #{departmentName};
	</select>

	<insert id="entryUser">
		insert into users
		(
			login_id,
			password,
			name,
			branch_id,
			department_id,
			status,
			last_login_date
		)
		 values
		(
			#{loginId},
			#{password},
			#{name},
			#{branch_id},
			#{department_id},
			#{status},
			#{lastLoginDate}
		);

	</insert>

</mapper>